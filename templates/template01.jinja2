<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Josefin Sans Font from Google Fonts -->
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@300;400;500;600;700&display=swap">
  <title>{{ user.name }} - {{ user.title }} Resume</title>
  <style>
    /* Global box sizing and reset */
    html {
      box-sizing: border-box;
    }

    *,
    *::before,
    *::after {
      box-sizing: inherit;
      margin: 0;
      padding: 0;
    }

    body,
    html {
      font-family: 'Josefin Sans', serif;
      font-size: 13px;
      line-height: 1.5;
      color: #212121;
      -webkit-font-smoothing: antialiased;
    }

    /* Define the page size for printing (A4) with explicit margins */
    @page {
      size: 210mm 250mm;
      margin: 20mm;
    }

    /* Resume container - let height flow naturally to avoid clipping */
    .resume {
      width: 210mm;
      margin: 0 auto;
      padding: 20mm;
    }

    /* Header and photo container */
    .header {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 30px;
    }

    .photo-container {
      width: 120px;
      height: 120px;
      margin-right: 25px;
      overflow: hidden;
      border-radius: 50%;
      flex-shrink: 0;
    }

    .photo-container img {
      width: 100%;
      height: auto;
      display: block;
    }

    .name {
      font-weight: 700;
      font-size: 50px;
      line-height: 55px;
      margin-bottom: 10px;
    }

    .position {
      font-weight: 400;
      font-size: 12px;
      letter-spacing: 0.82px;
      opacity: 0.6;
      text-transform: uppercase;
    }

    .section-title {
      font-weight: 700;
      font-size: 16px;
      line-height: 1.5;
      color: #000;
      margin: 10px 0 5px;
      padding: 5px 0;
      display: block;
    }

    /* Layout for content columns */
    .content-wrapper {
      display: flex;
      justify-content: space-between;
      gap: 4%;
    }

    .left-column,
    .right-column {
      width: 48%;
    }

    /* Profile, skills, and contact information styling */
    .profile,
    .main-skills,
    .contact-information {
      margin-bottom: 30px;
    }

    .profile p,
    .employment p,
    .education p {
      font-size: 13px;
      letter-spacing: -0.2px;
      line-height: 18px;
      opacity: 0.6;
    }

    /* CONTACT INFORMATION - force transparent background to avoid white boxes */
    .contact-information,
    .contact-information * {
      background: none !important;
    }

    .contact-item {
      margin-bottom: 5px;
      padding: 2px 0;
    }

    .skill-item {
      position: relative;
      margin-left: 10px;
      margin-bottom: 5px;
    }

    .skill-item::before {
      content: "•";
      position: absolute;
      left: -10px;
      top: 0;
      color: #212121;
    }

    /* Prevent page breaks within employment and education items */
    .employment-item,
    .education-item {
      margin-bottom: 20px;
      page-break-inside: avoid;
    }

    .job-title,
    .school-name {
      font-weight: 500;
      font-size: 13px;
      letter-spacing: -0.3px;
    }

    /* Centralized table styling for details in employment and education */
    .info-table {
      width: 100%;
      margin-top: 5px;
      font-size: 12px;
      opacity: 0.7;
      border-collapse: collapse;
    }

    .info-table td {
      padding: 2px 0;
    }

    /* For better print color fidelity */
    @media print {
      body {
        -webkit-print-color-adjust: exact;
      }
    }
  </style>
</head>

<body>
  <main class="resume">
    <header class="header">
      {% if photo_base64 %}
      <div class="photo-container">
        <img src="{{ photo_base64 }}" alt="{{ user.name }}" />
      </div>
      {% endif %}
      <div>
        {% if photo_base64 %}
        <h1 class="name">
          {% set name_parts = user.name.split(' ') %}
          {% if name_parts|length > 1 %}
          {{ name_parts[0] }}<br>{{ name_parts[1:]|join(' ') }}
          {% else %}
          {{ user.name }}
          {% endif %}
        </h1>
        {% else %}
        <h1 class="name">{{ user.name }}</h1>
        {% endif %}
        <p class="position" {% if not user.photo %}style="text-align: center;" {% endif %}>
          {{ user.title }}
        </p>
      </div>
    </header>

    <div class="content-wrapper">
      <section class="left-column">
        <div class="profile">
          <h2 class="section-title">Profile</h2>
          <p>{{ user.summary }}</p>
        </div>
        <div class="main-skills">
          <h2 class="section-title">Main Skills</h2>
          <ul style="list-style: none; padding-left: 0;">
            {% for skill in user.skills %}
            <li class="skill-item">{{ skill }}</li>
            {% endfor %}
          </ul>
        </div>
        <div class="contact-information">
          <h2 class="section-title">Contact Information</h2>
          <div class="contact-item">{{ user.phone }}</div>
          <div class="contact-item">{{ user.email }}</div>
          <div class="contact-item">{{ user.location }}</div>
          <div class="contact-item">{{ user.linkedin }}</div>
        </div>
      </section>
      <section class="right-column">
        <div class="employment">
          <h2 class="section-title">Employment</h2>
          {% for job in user.experience %}
          <div class="employment-item">
            <h3 class="job-title">{{ job.title }} at {{ job.company }}</h3>
            <table class="info-table">
              <tr>
                <td style="text-align: left;">{{ job.start_date }} — {{ job.end_date }}</td>
                <td style="text-align: right;">{{ job.location }}</td>
              </tr>
            </table>
            <p style="margin-top: 10px;">{{ job.description }}</p>
          </div>
          {% endfor %}
        </div>
        <div class="education">
          <h2 class="section-title">Education</h2>
          {% for edu in user.education %}
          <div class="education-item">
            <table class="info-table">
              <tr>
                <td style="text-align: left; font-weight: bold;">{{ edu.institution }}</td>
                <td style="text-align: right;">{{ edu.start_date }} — {{ edu.end_date }}</td>
              </tr>
            </table>
            <p style="margin-top: 5px;">{{ edu.degree }}, GPA: {{ edu.gpa }}</p>
          </div>
          {% endfor %}
        </div>
      </section>
    </div>
  </main>
</body>

</html>